<!DOCTYPE html>
<html>
    <head>
    <meta http-equiv="content-language" content="en">
    <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>My experience with Krew to manage kubectl plugins</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Kubectl plugins are extremely useful to provide a set of friendly utilities to interact with kubernetes in your environment. Krew is a project that helps you managing the plugin lifecycle. I have to add profefe to it and this is what I learned.">
    <meta name="keywords" content="kubernetes">
    <meta name="google-site-verification" content="FoOIQ005srOjHlH19pNWapHvlOOVgCqHsz47IfQ6QNo" />
    <link rel="canonical" href="https://gianarb.it/blog/my-experiene-with-krew-to-manage-kubectl-plugins">
    <link rel="icon" type="image/png" href="/img/favicon.png" />

    <meta name='twitter:card' content='summary_large_image'>
    <meta name='twitter:title' content="My experience with Krew to manage kubectl plugins">
    <meta name='twitter:description' content="Kubectl plugins are extremely useful to provide a set of friendly utilities to interact with kubernetes in your environment. Krew is a project that helps you managing the plugin lifecycle. I have to add profefe to it and this is what I learned.">

    <meta property="og:title" content="My experience with Krew to manage kubectl plugins" />
    <meta property="og:site_name" content="gianarb blog"/>
    <meta property="og:url" content="https://gianarb.it/blog/my-experiene-with-krew-to-manage-kubectl-plugins" />
    <meta property="og:description" content="Kubectl plugins are extremely useful to provide a set of friendly utilities to interact with kubernetes in your environment. Krew is a project that helps you managing the plugin lifecycle. I have to add profefe to it and this is what I learned." />
    <meta property="og:type" content="article" />
    <meta property="og:locale" content="en_US" />

    <meta property="og:image" content="https://gianarb.it/img/kubernetes.png" />
    <meta name='twitter:image' content="https://gianarb.it/img/kubernetes.png">



    <meta property="twitter:account_id" content="129952408" />
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@gianarb">
    <meta name="twitter:creator" content="@gianarb">
    <meta name="twitter:title" content="My experience with Krew to manage kubectl plugins">
    <meta name="twitter:description" content="Kubectl plugins are extremely useful to provide a set of friendly utilities to interact with kubernetes in your environment. Krew is a project that helps you managing the plugin lifecycle. I have to add profefe to it and this is what I learned.">
    <meta name="twitter:image:src" content="https://gianarb.it/img/kubernetes.png">
    <meta name="twitter:image:width" content="500">
    <meta name="twitter:image:height" content="500">
    <meta name="twitter:domain" content="gianarb.it">

    <link rel='alternate' type='application/atom+xml' title='Atom 0.3' href='/atom.xml'>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css" rel="stylesheet">

    <!-- source https://github.com/rsms/inter/ -->
    <link href="/fonts/inter/inter-ui.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/main.css">

</head>

    <body>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark" role="navigation">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="navbar-brand" href="#">
        <a href="/" class="nav-link">
          <img src="/img/favicon.png" class="img-fluid d-inline-block align-top" alt="">
        </a>
      </div>

      <div class="collapse navbar-collapse">
        <ul class="navbar-nav">
          <li><a class="nav-link" href="/">Home</a></li>
          <li><a class="nav-link" href="/blog.html">Blog</a></li>
          <li class="nav-item"><a href="/conferences.html" class="nav-link">Conferences</a></li>
        </ul>

        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7DLK7L&placement=gianarbit" id="_carbonads_js"></script>
          </li>
        </ul>

      </div>

    </div>
</nav>

        

<div class="container">

    <div class="content">

        <div class="row">
            <div id="post-title" class="mt-5 col-md-12">
                <h1>My experience with Krew to manage kubectl plugins</h1>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <p class="meta">16 Jan 2020 · <!-- thanks to https://www.davidputney.com/2016/07/how-medium-style-read-time-estimate.html -->


<span class="blog-read-time">Two minute read</span>
 · kubernetes</p>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="addthis_sharing_toolbox"></div>
            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-12">
            <p>I wrote a good number of kubectl plugins so far, but there is a lot more I can
do with them. Every time I write a new one I discover something new and that is
why I am always excited to see what will happen with the next one.</p>

<p><a href="[https://gianarb.it/blog/unit-testing-kubernetes-client-in-go](https://gianarb.it/blog/unit-testing-kubernetes-client-in-go)">“Unit Testing Kubernetes Client in
Go”</a>
and <a href="[https://gianarb.it/blog/kubectl-flags-in-your-plugin](https://gianarb.it/blog/kubectl-flags-in-your-plugin)">“Kubectl flags in your kubectl
plugin”</a>
are two of the lessons learned along the way.</p>

<p>With
<a href="[https://github.com/profefe/kube-profefe](https://github.com/profefe/kube-profefe)">kubectl-profefe</a>
I decided to have a look at
<a href="[https://github.com/kubernetes-sigs/krew](https://github.com/kubernetes-sigs/krew)">krew</a>.
It is a package manager for kubectl plugins. It is a plugin itself with the end
goal to help you installing and managing the lifecycle for your plugin.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl krew install profefe
</code></pre></div></div>

<p>It gives you the ability, with a single command to install, update or delete the
kubectl-profefe cli command.</p>

<p>Twitter got pretty excited recently about
<a href="[https://github.com/ahmetb/kubectl-tree](https://github.com/ahmetb/kubectl-tree)">kubectl-tree</a>,
a plugin from
<a href="[https://twitter.com/ahmetb](https://twitter.com/ahmetb)">@ahmetb</a> an old
friend of mine and active Kubernetes contributor and maintainer for krew as
well. It helps you to visualize kubernetes resources as a tree to simplify the
comprehension of the hierarchy and the connection between resources.</p>

<p>Two other examples that I would like to mention are from @ahmetb too. Kubectl
plugins don’t need to be extremely complicated, but you always have to keep in
mind the mantra “usability first.” It doesn’t matter how many lines of code you
write: the end goal should be to develop something usable and well-integrated
with kubernetes! <code class="highlighter-rouge">kubectl ctx</code> and <code class="highlighter-rouge">kubectl ns</code> are fabulous examples of
something easy but helpful. We switch between context and namespace more than
once a day between production clusters, local development, and so on. It is not
a very complicated thing to do natively: for example, changing context with
kubectl is just a matter of typing:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl config use new-context
</code></pre></div></div>

<p>Worst case scenario for the namespace, you have to type the <code class="highlighter-rouge">-n</code> flags every
time you run a kubectl command that is not in the namespace you have set by
default for the context you are using.</p>

<p>But <code class="highlighter-rouge">kubectl ctx</code> and <code class="highlighter-rouge">kubectl ns</code> simplify this process even more. You only
have to type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl ctx new-context
</code></pre></div></div>

<p>Or</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl ns new-namespace
</code></pre></div></div>

<p>If you are developing an open-source kubectl plugin and you need a friendly and
easy way to distribute it, you should have a look at krew. The publication
process is straightforward, <a href="[https://github.com/kubernetes-sigs/krew-index/pull/415](https://github.com/kubernetes-sigs/krew-index/pull/415)">this is the
PR</a>
I had to submit for profefe, you have to type some YAML as usual.</p>

            </div>
        </div>

        <div class="row mt-3">
            <div class="col-md-12">
                <div id="disqus_thread"></div>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </div>
        </div>

    </div>
</div>

<script>
var disqus_config = function () {
    this.page.url = 'https://gianarb.it/blog/my-experiene-with-krew-to-manage-kubectl-plugins';
    this.page.identifier = 'https://gianarb.it/blog/my-experiene-with-krew-to-manage-kubectl-plugins';
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://gianarbdeveloper.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>

        <div class="footer text-center bg-dark text-light">
    <div class="container">
        <div class="row">
            <div class="col-md-12 small">
                last update December 22, 2020 ·
                <a href="https://twitter.com/gianarb" target="_blank">twitter.com/gianarb</a> ·
                <a href="https://github.com/gianarb" target="_blank">github.com/gianarb</a> ·
                <a href="https://twitch.tv/gianarb" target="_blank">twitch.tv/gianarb</a> ·
                <a href="/atom.xml">Atom</a>
            </div>
        </div>
    </div>
</div>

        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/dockerfile.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/go.min.js"></script>
        <script src="/js/custom.js"></script>

        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
